<?php


namespace App\Http\Resources\Json;

class JsonResource extends \Illuminate\Http\Resources\Json\JsonResource
{
    protected static ?bool $_IS_COLLECTION = null;

    protected array $hiddenFields = [];

    public static function make(...$parameters)
    {
        if (is_null(self::$_IS_COLLECTION)) self::$_IS_COLLECTION = false;
        return parent::make(...$parameters); // TODO: Change the autogenerated stub
    }

    /**
     * @param mixed $resource
     * @return \Illuminate\Http\Resources\Json\AnonymousResourceCollection
     */
    public static function collection($resource)
    {
        if (is_null(self::$_IS_COLLECTION)) self::$_IS_COLLECTION = true;
        return parent::collection($resource);
    }

    public function hide(array $fields): static
    {
        $this->hiddenFields = $fields;
        return $this;
    }

    protected function filterFields($array): array
    {
        return collect($array)->forget($this->hiddenFields)->toArray();
    }

    public function toArray($request)
    {
        return parent::toArray($request); // TODO: Change the autogenerated stub
    }

}
